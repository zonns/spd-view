<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>首页</title>
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <link rel="stylesheet" href="../plugins/pace-master/themes/blue/pace-theme-flash.css">
  <script type="text/javascript" src="../plugins/pace-master/pace.min.js"></script>
  <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="../dist/css/font-awesome.min.css">
  <link rel="stylesheet" href="../dist/css/ionicons.min.css">
  <link rel="stylesheet" href="../plugins/jvectormap/jquery-jvectormap-1.2.2.css">
  <link rel="stylesheet" href="../dist/css/AdminLTE.min.css">
  <link rel="stylesheet" href="../dist/css/skins/all-skins.min.css">
  <link rel="stylesheet" href="../dist/css/style.css">
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body class="hold-transition skin-blue sidebar-mini new-bg-gray">
<section class="new-content-header">
    <div class="panel-header bg-primary-gradient">
    </div>
</section>

<!-- Main content -->
<section class="content">
    <div class="row">
        <div class="col-md-12">
            <h4 class="text-white home-title"><i class="fa fa-area-chart"></i> <strong style="margin-left: 15px;">数据看板</strong></h4>
        </div>
    </div>
    <div class="row">
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box new-info-box">
                <div class="info-box-content new-info-box-content no-margin-l">
                    <span class="new-info-box-text">科室需求计划</span>
                    <span class="new-info-icon"><i class="fa fa-pencil"></i></span>
                </div>
                <div class="new-row">
                    <div class="new-flex-1 text-center border-after">
                        <div>
                            <span class="info-box-number text-white">200</span>
                            <span class="info-box-text text-white">全部需求计划</span>
                        </div>
                    </div>
                    <div class="new-flex-1 text-center">
                        <div>
                            <span class="info-box-number text-orange">200</span>
                            <span class="info-box-text text-white">待处理计划</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.col -->
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box new-info-box">
                <div class="info-box-content new-info-box-content no-margin-l">
                    <span class="new-info-box-text">科室补货管理</span>
                    <span class="new-info-icon"><i class="fa fa-long-arrow-down"></i></span>
                </div>
                <div class="new-row">
                    <div class="new-flex-1 text-center border-after">
                        <div>
                            <span class="info-box-number text-white">200</span>
                            <span class="info-box-text text-white">全部请领单</span>
                        </div>
                    </div>
                    <div class="new-flex-1 text-center">
                        <div>
                            <span class="info-box-number text-orange">200</span>
                            <span class="info-box-text text-white">待处理请领单</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.col -->

        <!-- fix for small devices only -->
        <div class="clearfix visible-sm-block"></div>

        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box new-info-box">
                <div class="info-box-content new-info-box-content no-margin-l">
                    <span class="new-info-box-text">科室退库管理</span>
                    <span class="new-info-icon"><i class="fa fa-long-arrow-up"></i></span>
                </div>
                <div class="new-row">
                    <div class="new-flex-1 text-center border-after">
                        <div>
                            <span class="info-box-number text-white">200</span>
                            <span class="info-box-text text-white">全部退库单</span>
                        </div>
                    </div>
                    <div class="new-flex-1 text-center">
                        <div>
                            <span class="info-box-number text-orange">200</span>
                            <span class="info-box-text text-white">待处理退库单</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /.col -->
        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box new-info-box">
                <div class="info-box-content new-info-box-content no-margin-l">
                    <span class="new-info-box-text">科室结算管理</span>
                    <span class="new-info-icon"><i class="fa fa-cny"></i></span>
                </div>
                <div class="new-row">
                    <div class="new-flex-1 text-center border-after">
                        <div>
                            <span class="info-box-number text-white">200</span>
                            <span class="info-box-text text-white">已结账日清</span>
                        </div>
                    </div>
                    <div class="new-flex-1 text-center">
                        <div>
                            <span class="info-box-number text-orange">200</span>
                            <span class="info-box-text text-white">待结账日清</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box new-info-box">
                <div class="info-box-content new-info-box-content no-margin-l">
                    <span class="new-info-box-text">订单数据</span>
                    <span class="new-info-icon"><i class="fa fa-list-ul"></i></span>
                </div>
                <div class="new-row">
                    <div class="new-flex-1 text-center border-after">
                        <div>
                            <span class="info-box-number text-white">200</span>
                            <span class="info-box-text text-white">全部订单量</span>
                        </div>
                    </div>
                    <div class="new-flex-1 text-center">
                        <div>
                            <span class="info-box-number text-orange">200</span>
                            <span class="info-box-text text-white">待处理订单量</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box new-info-box">
                <div class="info-box-content new-info-box-content no-margin-l">
                    <span class="new-info-box-text">入库上架管理</span>
                    <span class="new-info-icon"><i class="fa fa-upload"></i></span>
                </div>
                <div class="new-row">
                    <div class="new-flex-1 text-center border-after">
                        <div>
                            <span class="info-box-number text-white">200</span>
                            <span class="info-box-text text-white">全部入库单</span>
                        </div>
                    </div>
                    <div class="new-flex-1 text-center">
                        <div>
                            <span class="info-box-number text-orange">200</span>
                            <span class="info-box-text text-white">待上架单数</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box new-info-box">
                <div class="info-box-content new-info-box-content no-margin-l">
                    <span class="new-info-box-text">库房耗材管理</span>
                    <span class="new-info-icon"><i class="fa fa-university"></i></span>
                </div>
                <div class="new-row">
                    <div class="new-flex-1 text-center border-after">
                        <div>
                            <span class="info-box-number text-white">200</span>
                            <span class="info-box-text text-white">待处理打包计划</span>
                        </div>
                    </div>
                    <div class="new-flex-1 text-center">
                        <div>
                            <span class="info-box-number text-orange">200</span>
                            <span class="info-box-text text-white">待处理拆包计划</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-3 col-sm-6 col-xs-12">
            <div class="info-box new-info-box">
                <div class="info-box-content new-info-box-content no-margin-l">
                    <span class="new-info-box-text">供应商退货管理</span>
                    <span class="new-info-icon"><i class="fa fa-reply"></i></span>
                </div>
                <div class="new-row">
                    <div class="new-flex-1 text-center border-after">
                        <div>
                            <span class="info-box-number text-white">200</span>
                            <span class="info-box-text text-white">全部退货单</span>
                        </div>
                    </div>
                    <div class="new-flex-1 text-center">
                        <div>
                            <span class="info-box-number text-orange">200</span>
                            <span class="info-box-text text-white">待处理退货</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /.row -->
    <div class="row" style="margin-top: 30px">
        <div class="col-md-6">
            <div class="box new-box-blue">
                <div class="box-header with-border">
                    <h4 class="box-title new-box-title">科室需求计划</h4>
                </div>
                <div class="box-body">
                    <div id="plan" style="height: 300px">

                    </div>
                </div>
                <div class="box-footer">
                    <div class="row">
                        <div class="col-md-6 col-xs-6">
                            <div class="description-block border-right">
                                <!-- <span class="description-percentage text-green"><i class="fa fa-caret-up"></i> 17%</span> -->
                                <h5 class="description-header">6</h5>
                                <span class="description-text">需要补货科室数量</span>
                            </div>
                        </div>
                        <div class="col-md-6 col-xs-6">
                            <div class="description-block border-right">
                                <h5 class="description-header">124</h5>
                                <span class="description-text">需要补货耗材品种</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="box new-box-blue">
                <div class="box-header with-border">
                    <h4 class="box-title new-box-title">库房补货预警</h4>
                </div>
                <div class="box-body">
                    <div id="warning" style="height: 300px">

                    </div>
                </div>
                <div class="box-footer">
                    <div class="row">
                        <div class="col-md-6 col-xs-6">
                            <div class="description-block border-right">
                                <!-- <span class="description-percentage text-green"><i class="fa fa-caret-up"></i> 17%</span> -->
                                <h5 class="description-header">6</h5>
                                <span class="description-text">需要补货库房</span>
                            </div>
                        </div>
                        <div class="col-md-6 col-xs-6">
                            <div class="description-block border-right">
                                <h5 class="description-header">124</h5>
                                <span class="description-text">需要补货耗材品种</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="box new-box-blue">
                <div class="box-header with-border">
                    <h4 class="box-title new-box-title">耗材效期预警</h4>
                </div>
                <div class="box-body">
                    <div id="hcwarn" style="height: 300px">

                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="box new-box-blue">
                <div class="box-header with-border">
                    <h4 class="box-title new-box-title">呆滞品预警</h4>
                </div>
                <div class="box-body">
                    <div id="dzpwarn" style="height: 300px">

                    </div>
                </div>
            </div>
        </div>
    </div>

</section>

<script src="../plugins/jQuery/jquery-2.2.3.min.js"></script>
<script src="../bootstrap/js/bootstrap.min.js"></script>
<script src="../plugins/fastclick/fastclick.js"></script>
<script src="../dist/js/app.min.js"></script>
<script src="../plugins/sparkline/jquery.sparkline.min.js"></script>
<script src="../plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
<script src="../plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
<script src="../plugins/slimScroll/jquery.slimscroll.min.js"></script>
<script src="../dist/js/echarts.min.js"></script>
<script src="../dist/js/demo.js"></script>
<script>
    function creatEchart(id,xData,datas) {
        var plan = echarts.init(document.getElementById(id));
        var option = {
            color: ['#48A8FF'],
            tooltip : {
                trigger: 'axis',
                axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                    type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            legend: {
                orient: 'vertical',
                right: "5%",
                textStyle: {
                    color: '#999',
                    fontSize: 14,

                },
                icon: 'roundRect',
                // data: data,
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis : [
                {
                    type : 'category',
                    data : xData,
                    axisTick: {
                        alignWithLabel: true
                    }
                }
            ],
            yAxis : [
                {
                    type : 'value',
                    axisLine: {
                        show: false,
                        lineStyle: {
                            color: "#ccc"
                        }
                    },
                    axisLabel: {
                        color: "#999"
                    },
                    splitLine: {
                        lineStyle: {
                            type: "dashed"
                        }
                    }
                }
            ],
            series : [
                {
                    name:'直接访问',
                    type:'bar',
                    barWidth: '60%',
                    data:datas
                }
            ]
        };
        plan.setOption(option);
    }

    function creatPieEchart (id,datas) {
        var myChart = echarts.init(document.getElementById(id));
        var color =["#4991FF", "#8C4DFE","#F75455","#00D8C1","#FFB933","#96C0E8"]
        option = {
            backgroundColor: "rgba(255,255,255,1)",
            color:color,
            legend: {
                orient: "vartical",
                x: "left",
                y: "middle",
                // top: "1",
                left: "70%",
                bottom: "0%",
                itemWidth: 20,
                itemHeight: 14,
                itemGap :15,
                formatter :function(name){
                    var oa = option.series[0].data;
                    let total = 0;
                    oa.forEach((item, index) => {
                        total += item.value;
                    });
                    for (let i = 0; i < oa.length; i++) {
                        if (name == oa[i].name) {
                            return `  ${name}  ${oa[i].value}`
                        }
                    }
                    
                }
            },
            series: [{
                name: '违规次数',
                type: 'pie',
                clockwise: false, //饼图的扇区是否是顺时针排布
                minAngle: 20, //最小的扇区角度（0 ~ 360）
                radius: ["30%", "70%"],
                center: ["30%", "50%"],
                avoidLabelOverlap: false,
                itemStyle: { //图形样式
                    normal: {
                        borderColor: '#ffffff',
                        borderWidth: 3,
                    },
                },
                label: {
                    normal: {
                        show: false,
                        position: 'center',
                        formatter: '{text|{b}}\n{value|{d}%}',
                        rich: {
                            text: {
                                color: "#666",
                                fontSize: 14,
                                align: 'center',
                                verticalAlign: 'middle',
                                padding: 5
                            },
                            value: {
                                color: "#8693F3",
                                fontSize: 20,
                                align: 'center',
                                verticalAlign: 'middle',
                            },
                        }
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: 36,
                        }
                    }
                },
                data: datas
            }]
        };
        myChart.setOption(option);

        setTimeout(function() {
            myChart.dispatchAction({
                type: 'highlight',
                seriesIndex: 0,
                dataIndex: 0
            });

            myChart.on('mouseover', function(params) {
                if (params.name == datas[0].name) {
                    myChart.dispatchAction({
                        type: 'highlight',
                        seriesIndex: 0,
                        dataIndex: 0
                    });
                } else {
                    myChart.dispatchAction({
                        type: 'downplay',
                        seriesIndex: 0,
                        dataIndex: 0
                    });
                }
            });

            myChart.on('mouseout', function(params) {
                myChart.dispatchAction({
                    type: 'highlight',
                    seriesIndex: 0,
                    dataIndex: 0
                });
            });
        }, 1000);
    }
    var planXdata = ['小儿科', '神经内科', '骨科', '呼吸内科', '检验科', '口腔科', '耳鼻喉']
    var planData = [10, 52, 200, 334, 390, 330, 220]
    var pieXdata = ['一个月内过期', "1~3个月内过期", "3~6个月内过期", "6~12个月内过期"]
    var pieData = [{
            name: '一个月内过期',
            value: 13
        },
        {
            name: '1~3个月内过期',
            value: 25
        },
        {
            name: '3~6个月内过期',
            value: 27
        },
        {
            name: '6~12个月内过期',
            value: 30
        }
    ];

    creatEchart('plan',planXdata,planData)
    creatEchart('warning',planXdata,planData)
    creatPieEchart('hcwarn',pieData)
    creatPieEchart('dzpwarn',pieData)
</script>
</body>
</html>
